<p-toast></p-toast>
<div class="ui-fluid" responsiveLayout="stack" style="background: ghostwhite;">
    <p-tabView [(activeIndex)]="activeIndex" (onChange)="onTabClick()">
        <p-tabPanel header="Back" [style]="{'background-color': '(3, 83, 136)'}">
        </p-tabPanel>
        <p-tabPanel header="APR Dashboard" >
            <div class="grid">
                <div class="col-12 lg:col-4">
                    <div class="card">
                        <p-table [value]="resGetAgentAprDetails" styleClass="p-datatable-gridlines"
                            [resizableColumns]="true" columnResizeMode="expand" [tableStyle]="{'max-width': '70rem'}">
                            <ng-template pTemplate="caption">
                                Inbound Call Summary
                            </ng-template>
                            <ng-template pTemplate="header">
                                <tr class="tableData">
                                    <th [style]="{'background':'rgb(3, 83, 136)', 'color': 'white','font-size':'12px'}"
                                        pResizableColumn="name" pSortableColumn="name" style="width: 3.2px;">Call
                                        <p-sortIcon style="color: white;" field="name"></p-sortIcon>
                                    </th>
                                    <th [style]="{'background':'rgb(3, 83, 136)', 'color': 'white','font-size':'12px'}"
                                        pResizableColumn="set" pSortableColumn="set" style="width:3.2px;">Count
                                        <p-sortIcon style="color: white;" field="set"></p-sortIcon>
                                    </th>
                                </tr>
                            </ng-template>
                           
                            <ng-template pTemplate="body" let-product>
                                <tr class="tableData">
                                    <td style="font-size:12px;"><span>Incoming</span></td>
                                    <td style="font-size:12px;">{{product.totalincoming}}</td>
                                </tr>
                                <tr class="tableData">
                                    <td style="font-size:12px;"><span>Answered</span></td>
                                    <td style="font-size:12px;">{{product.incomingcallansd}}</td>
                                </tr>
                                <tr class="tableData">
                                    <td style="font-size:12px;"><span>Abandoned</span></td>
                                    <td style="font-size:12px;">{{product.incomingcallabnd}}</td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>

                <div class="col-12 lg:col-4">
                    <div class="card">
                        <p-table [value]="resGetAgentAprDetails" styleClass="p-datatable-gridlines"
                            [resizableColumns]="true" columnResizeMode="expand" [tableStyle]="{'max-width': '70rem'}">
                            <ng-template pTemplate="caption">
                                Outbound Call Summary
                            </ng-template>
                            <ng-template pTemplate="header">
                                <tr class="tableData">
                                    <th [style]="{'background':'rgb(3, 83, 136)', 'color': 'white','font-size':'12px'}"
                                        pResizableColumn="name" pSortableColumn="name" style="width: 3.2px;">Call
                                        <p-sortIcon field="name"></p-sortIcon>
                                    </th>
                                    <th [style]="{'background':'rgb(3, 83, 136)', 'color': 'white','font-size':'12px'}"
                                        pResizableColumn="set" pSortableColumn="set" style="width:3.2px;">Count
                                        <p-sortIcon field="set"></p-sortIcon>
                                    </th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-product>
                                <tr class="tableData">
                                    <td style="font-size:12px;"><span>Outgoing Auto</span></td>
                                    <td style="font-size:12px;">{{product.outgoingauto}}</td>
                                </tr>
                                <tr class="tableData">
                                    <td style="font-size:12px;"><span>Answered Auto</span></td>
                                    <td style="font-size:12px;">{{product.outgoingcallansauto}}</td>
                                </tr>
                                <tr class="tableData">
                                    <td style="font-size:12px;"><span>Abandoned Auto</span></td>
                                    <td style="font-size:12px;">{{product.outgoingcallabndauto}}</td>
                                </tr>
                                <tr class="tableData">
                                    <td style="font-size:12px;"><span>Manual</span></td>
                                    <td style="font-size:12px;">{{product.outgoingmanual}}</td>
                                </tr>
                                <tr class="tableData">
                                    <td style="font-size:12px;"><span>Answered Manual</span></td>
                                    <td style="font-size:12px;">{{product.outgoingcallansmanaual}}</td>
                                </tr>
                                <tr class="tableData">
                                    <td style="font-size:12px;"><span>Abandoned Manual</span></td>
                                    <td style="font-size:12px;">{{product.outgoingcallabndmanaual}}</td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>

                <div class="col-12 lg:col-4">
                    <div class="card">
                        <p-table [value]="resGetAgentAprDetails" styleClass="p-datatable-gridlines"
                            [resizableColumns]="true" columnResizeMode="expand" [tableStyle]="{'max-width': '70rem'}">
                            <ng-template pTemplate="caption">
                                Login Summary
                            </ng-template>
                            <ng-template pTemplate="header">
                                <tr class="tableData">
                                    <th [style]="{'background':'rgb(3, 83, 136)', 'color': 'white','font-size':'12px'}"
                                        pResizableColumn="name" pSortableColumn="name" style="width: 3.2px;">Time
                                        <p-sortIcon field="name"></p-sortIcon>
                                    </th>
                                    <th [style]="{'background':'rgb(3, 83, 136)', 'color': 'white','font-size':'12px'}"
                                        pResizableColumn="set" pSortableColumn="set" style="width:3.2px;">Duration
                                        <p-sortIcon field="set"></p-sortIcon>
                                    </th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-product>
                                <tr class="tableData">
                                    <td style="font-size:12px;"><span>Idle Time</span></td>
                                    <td style="font-size:12px;">{{product.totalidletime}}</td>
                                </tr>
                                <tr class="tableData">
                                    <td style="font-size:12px;"><span>Talk Time</span></td>
                                    <td style="font-size:12px;">{{product.totaltalktime}}</td>
                                </tr>
                                <tr class="tableData">
                                    <td style="font-size:12px;"><span>ACW Time</span></td>
                                    <td style="font-size:12px;">{{product.totalacwtime}}</td>
                                </tr>
                                <tr class="tableData">
                                    <td style="font-size:12px;"><span>Hold Time</span></td>
                                    <td style="font-size:12px;">{{product.totalholdtime}}</td>
                                </tr>
                                <tr class="tableData">
                                    <td style="font-size:12px;"><span>Break Time</span></td>
                                    <td style="font-size:12px;">{{product.totalbreaktime}}</td>
                                </tr>
                                <tr class="tableData">
                                    <td style="font-size:12px;"><span>Login Time</span></td>
                                    <td style="font-size:12px;">{{product.totallogintime}}</td>
                                </tr>
                                <tr class="tableData">
                                    <td style="font-size:12px;"><span>Staffed Time</span></td>
                                    <td style="font-size:12px;">{{product.totalstaffedtime}}</td>
                                </tr>
                                <tr class="tableData">
                                    <td style="font-size:12px;"><span>Active Time</span></td>
                                    <td style="font-size:12px;">{{product.totalactivetime}}</td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
            </div>
        </p-tabPanel>
      
        <p-tabPanel header="Agent Summary" >


            <div class="grid forms-grid flex-row p-fluid" style="margin-left:10px; margin-top:1px; ">
                <div class="col-12 md:col-1" style="margin-top:2px;">From*</div>
                <div class="col-12 md:col-3">
                    <p-calendar [(ngModel)]="fromdate" [showTime]="true" hourFormat="24" [showIcon]="true"
                        [showSeconds]="true" inputId="time"></p-calendar>
                </div>
                <div style="margin-top:2px;" class=" col-12 md:col-1">To*</div>
                <div class=" col-12 md:col-3">
                    <p-calendar [(ngModel)]="todate" [showTime]="true" hourFormat="24" [minDate]="fromdate" [showIcon]="true"
                        [showSeconds]="true" inputId="time"></p-calendar>
                </div>

                <div style="margin-top:2px;" class=" col-12 md:col-1" *ngIf="enableDashPhoneSearch">Mob No</div>
                <div class=" col-12 md:col-2" *ngIf="enableDashPhoneSearch">
                    <input type="text" pInputText [(ngModel)]="mob_no" class="p-inputtext-sm">
                </div>

            </div>
            <div class="grid forms-grid flex-row p-fluid" style="margin-left:10px;">
                <div class="col-12 md:col-1" style="margin-top:2px; ">Parent Disposition</div>
                <div class="col-12 md:col-3">
                    <p-dropdown id="type" [options]="parentDispoition" [filter]="true" filterBy="fld_dispName"
                        [showClear]="true"  class=" p-inputtext-sm"
                        [(ngModel)]="parentDispoitionValue" (onClick)="parentDispoitionValueagent()"
                        (onSelect)="onSelectedCampaign($event)" (onChange)="onSelectedCampaign($event)"
                        optionLabel="fld_dispName" optionValue="fld_dispId" placeholder="Select Disposition"
                        [style]="{'background-color':'#f5f5f5'}">
                        <ng-template let-selectedType pTemplate="item">
                            <div class="selectedType-item">
                                <div class="contect-inner-data">{{selectedType.fld_dispName}}</div>
                            </div>
                        </ng-template>
                    </p-dropdown>
                </div>
                <div style="margin-top:2px;" class=" col-12 md:col-1">Sub Disposition</div>
                <div class=" col-12 md:col-3">
                    <p-dropdown id="type" [options]="subDispoition" [filter]="true" filterBy="fld_dispName"
                        [showClear]="true"  class=" p-inputtext-sm" [(ngModel)]="subDispoitionValue"
                        (onClick)="subDispoitionValueagent()" (onSelect)="onSelectedCampaignSub($event)"
                        (onChange)="onSelectedCampaignSub($event)" optionLabel="fld_dispName" optionValue="fld_dispId"
                        placeholder="Select Disposition" [style]="{'background-color':'#f5f5f5'}">
                        <ng-template let-selectedType pTemplate="item">
                            <div class="selectedType-item">
                                <div class="contect-inner-data">{{selectedType.fld_dispName}}</div>
                            </div>
                        </ng-template>
                    </p-dropdown>
                </div>
                <div class="col">
                    <button type="button" pRipple pButton label="Submit" (click)="getAgentSummaryDetailsNew(0)"></button>
                </div>
                <div class=" col" >
                    <button type="button" pRipple pButton label="Clear" (click)="resetData()"></button>
                </div>
                <div class="col"></div>
            </div>

            <div class="grid">
                <div class="col-12 lg:col-12">
                    <div class="card">
                        <p-table [value]="agentSummarArray" styleClass="p-datatable-gridlines" [resizableColumns]="true"
                            columnResizeMode="expand" [tableStyle]="{'max-width': '70rem'}" [paginator]="true"   [rows]="5"
                            [showCurrentPageReport]="true">
                            <ng-template pTemplate="caption">
                                Agent Disposition Summary
                            </ng-template>
                            <ng-template pTemplate="header">
                                <tr class="tableData">

                                    <th [style]="{'background':'rgb(3, 83, 136)', 'color': 'white','font-size':'12px'}"
                                        pResizableColumn="name" pSortableColumn="name" style="width:3.2px;">Name
                                    </th>
                                    <th [style]="{'background':'rgb(3, 83, 136)', 'color': 'white','font-size':'12px'}"
                                        pResizableColumn="phoneNo" pSortableColumn="phoneNo" style="width:3.2px;">Phone Number

                                    </th>
                                    <th [style]="{'background':'rgb(3, 83, 136)', 'color': 'white','font-size':'12px'}"
                                        pResizableColumn="remarks" pSortableColumn="remarks" style="width:3.2px;">Remark

                                    </th>
                                    <th [style]="{'background':'rgb(3, 83, 136)', 'color': 'white','font-size':'12px'}"
                                    pResizableColumn="set" pSortableColumn="set" style="width:3.2px;">DialDate Time

                                </th>
                                    <th [style]="{'background':'rgb(3, 83, 136)', 'color': 'white','font-size':'12px'}"
                                         style="width:3.2px;">Voice
                                        Recording Path

                                    </th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-product>
                                <tr class="tableData">
                                    <td style="font-size:12px;">{{product.name}}</td>
                                    <td style="font-size:12px;">{{product.phoneNo}}</td>
                                    <td style="font-size:12px;">{{product.remarks}}</td>
                                    <td style="font-size:12px;">{{product.dialDateTime   | date:'medium':'GMT'}}</td>
                                    <!-- <td style="font-size:12px;">{{retundata(product.dialDateTime)   | date:'medium':'GMT'}}</td> -->
                                    <td style="font-size:12px;">
                                        <audio controls style="height:25px !important;">
                                            <source src="{{product.voiceRecPath}}" type="audio/wav" >
                                        </audio>
                                    </td>
                                </tr>

                            </ng-template>

                            <ng-template pTemplate="paginatorleft">
                                <!-- <p-button type="button" icon="pi pi-plus" styleClass="p-button-text" style="display: none !important;"></p-button> -->
                            </ng-template>
                            <ng-template pTemplate="paginatorright">
                                <button type="button" pRipple pButton label="More Records"(click)=getAgentSummaryDetailsNew(1)></button>
                            </ng-template>
                        </p-table>
                    </div>
                </div>

                <!-- <div class="col-12 lg:col-6">
                    <div class="card">
                        <p-table [value]="leadSetSummaryTableData" styleClass="p-datatable-gridlines"
                            [resizableColumns]="true" columnResizeMode="expand" [tableStyle]="{'max-width': '70rem'}">
                            <ng-template pTemplate="caption">
                                LeadSet Summary
                            </ng-template>
                            <ng-template pTemplate="header">
                                <tr class="tableData">
                                    <th [style]="{'background':'rgb(3, 83, 136)', 'color': 'white','font-size':'12px'}"
                                        pResizableColumn="leadName" pSortableColumn="leadName">Lead Name
                                    </th>
                                    <th [style]="{'background':'rgb(3, 83, 136)', 'color': 'white','font-size':'12px'}"
                                        pResizableColumn="approveCount" pSortableColumn="approveCount"> Approve
                                    </th>
                                    <th [style]="{'background':'rgb(3, 83, 136)', 'color': 'white','font-size':'12px'}"
                                        pResizableColumn="successCount" pSortableColumn="successCount">
                                        Success
                                    </th>
                                    <th [style]="{'background':'rgb(3, 83, 136)', 'color': 'white','font-size':'12px'}"
                                        pResizableColumn="failedCount" pSortableColumn="failedCount"> Failed
                                    </th>
                                    <th [style]="{'background':'rgb(3, 83, 136)', 'color': 'white','font-size':'12px'}"
                                        pResizableColumn="undailedCount" pSortableColumn="undailedCount"> Undialed
                                    </th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-product>
                                <tr class="tableData">
                                    
                                    <td style="font-size:12px;">{{product.leadName}}</td>
                                
                                    <td style="font-size:12px;">{{product.approveCount}}</td>
                               
                                    <td style="font-size:12px;">{{product.successCount}}</td>
                               
                                
                                    <td style="font-size:12px;">{{product.failedCount}}</td>
                                  
                                    <td style="font-size:12px;">{{product.undailedCount}}</td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div> -->
            </div>
        </p-tabPanel>
    </p-tabView>

</div>